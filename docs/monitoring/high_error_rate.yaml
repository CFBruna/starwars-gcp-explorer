displayName: "Star Wars API - High Error Rate"
documentation:
  content: "Alert when 5xx error rate exceeds 0.05 checks/sec (approx 3/min)"
  mimeType: "text/markdown"
conditions:
- displayName: "5xx Error Rate > 0.05/s"
  conditionThreshold:
    filter: 'resource.type="cloud_run_revision" AND resource.labels.service_name="starwars-api" AND metric.type="run.googleapis.com/request_count" AND metric.labels.response_code_class="5xx"'
    aggregations:
    - alignmentPeriod: 60s
      perSeriesAligner: ALIGN_RATE
      crossSeriesReducer: REDUCE_SUM
    comparison: COMPARISON_GT
    thresholdValue: 0.05
    duration: 300s
    trigger:
      count: 1
combiner: OR
enabled: true
